services:
  scheduler-bot:
    build: .
    container_name: obsidian-scheduler-bot
    restart: always
    env_file:
      - .env
    volumes:
      # Mount obsidian submodule for parsing and git pull
      - ./obsidian:/app/obsidian:rw
      # Mount git modules for submodule to work
      - ./.git/modules/obsidian:/app/.git/modules/obsidian:rw
      # Mount config.yml for persistent settings
      - ./config.yml:/app/config.yml:rw
    environment:
      - TZ=Asia/Seoul
    # For git operations inside container
    network_mode: host
